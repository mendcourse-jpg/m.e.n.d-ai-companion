<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>M.E.N.D AI Companion</title>
    <style>
        body {
            background: #f8f4fc;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .container {
            max-width: 500px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #6a3ea1;
        }
        #messages {
            background: #faf8ff;
            padding: 10px;
            height: 300px;
            overflow-y: auto;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
        }
        .msg {
            margin-bottom: 12px;
        }
        .me {
            text-align: right;
            color: #6a3ea1;
        }
        .bot {
            text-align: left;
            color: #333;
        }
        input {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #aaa;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>M.E.N.D AI</h1>
        <div id="messages"></div>
        <input 
            id="userInput" 
            placeholder="Talk to me mama…" 
            onkeydown="if(event.key==='Enter'){ sendMessage(); }"
        />
    </div>

<script>
const messagesDiv = document.getElementById("messages");

function addMessage(text, sender) {
    const msg = document.createElement("div");
    msg.className = "msg " + sender;
    msg.innerText = text;
    messagesDiv.appendChild(msg);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

async function sendMessage() {
    const input = document.getElementById("userInput");
    const text = input.value.trim();
    if (!text) return;

    addMessage(text, "me");
    input.value = "";

    addMessage("Hold on mama, let me think…", "bot");

    try {
        const response = await fetch("https://api.aimlapi.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer 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"
            },
            body: JSON.stringify({
                model: "gpt-4o-mini",
                messages: [
                    {
                        role: "system",
                        content: "You are M.E.N.D AI, a healing guide for Black mothers recovering from the breakup with their children’s father. You speak with warmth, clarity, and empowerment. You help with emotional healing, parenting support, motivation, and local resources."
                    },
                    { role: "user", content: text }
                ]
            })
        });

        const data = await response.json();
        messagesDiv.lastChild.remove(); 

        if (data?.choices?.[0]?.message?.content) {
            addMessage(data.choices[0].message.content, "bot");
        } else {
            addMessage("Something glitched mama — try again.", "bot");
        }

    } catch (err) {
        messagesDiv.lastChild.remove();
        addMessage("I'm here mama… but something went wrong. Try again.", "bot");
    }
}
</script>

</body>
</html>
